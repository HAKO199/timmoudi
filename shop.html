<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù…ØªØ¬Ø±ÙŠ - ØªØ¬Ø±Ø¨Ø© Ù…ØªØ¬Ø± ØªÙØ§Ø¹Ù„ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b1220; --card:#0f1724; --muted:#9aa7bf; --accent:#ff6b6b; --accent2:#7c5cff;
    --text:#e9eef8;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:'Tajawal',sans-serif;background:linear-gradient(180deg,var(--bg),#071127);color:var(--text);min-height:100vh}
  a{color:inherit}
  .container{max-width:1200px;margin:0 auto;padding:14px}

/* TOPBAR */
  header.topbar{display:flex;align-items:center;gap:12px;padding:12px;border-bottom:1px solid rgba(255,255,255,0.03);position:sticky;top:0;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));z-index:80}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width:48px;height:48px;border-radius:10px;background:conic-gradient(from 120deg,var(--accent2),#00d4ff);display:grid;place-items:center;color:#021; font-weight:900}
  .site-title{font-weight:800}
  .search{flex:1}
  .search input{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:var(--text)}
  .top-actions{display:flex;align-items:center;gap:10px}
  .cat-links{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .cat-links button{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted);cursor:pointer}
  .cat-links button.active{background:var(--accent2);color:#071024;border:0}

/* layout */
  .main{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-top:18px}
  @media(max-width:980px){ .main{grid-template-columns:1fr} .aside{order:2} .products{order:1} }

/* products */
  .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
  .product{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:12px;padding:10px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:10px}
  .product img{width:100%;height:150px;object-fit:cover;border-radius:8px;cursor:pointer}
  .product h4{margin:0;font-size:16px}
  .meta{color:var(--muted);font-size:13px}
  .price{font-weight:800;color:var(--accent);font-size:16px}
  .row{display:flex;gap:8px;align-items:center}

/* aside (cart) */
  .aside{position:relative}
  .cart{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03)}
  .cart h3{margin:0 0 8px}
  .cart-list{display:flex;flex-direction:column;gap:8px;max-height:360px;overflow:auto;padding-right:6px}
  .cart-item{display:flex;gap:8px;align-items:center;background:rgba(255,255,255,0.02);padding:8px;border-radius:8px}
  .cart-item img{width:60px;height:48px;object-fit:cover;border-radius:6px}
  .cart-item .info{flex:1}
  .cart-item .qty{display:flex;gap:6px;align-items:center}
  .small-btn{padding:6px 8px;border-radius:6px;border:0;background:rgba(255,255,255,0.04);color:var(--text);cursor:pointer}

/* footer of cart */
  .cart-summary{display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-weight:700}
  .checkout{margin-top:10px;padding:10px;border-radius:8px;border:0;background:var(--accent2);color:#071024;font-weight:800;cursor:pointer}

/* product modal */
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.75);z-index:120}
  .modal.open{display:flex}
  .modal-box{background:var(--card);padding:16px;border-radius:10px;max-width:900px;width:94%;display:grid;grid-template-columns:1fr 320px;gap:12px}
  .modal-box img{width:100%;height:380px;object-fit:cover;border-radius:8px}
  .modal-box .desc{padding:8px}

/* small helpers */
  .badge{background:var(--accent);color:#021;padding:6px 8px;border-radius:8px;font-weight:800}
  .empty{color:var(--muted);padding:20px;text-align:center}

/* header cart icon */
  .cart-icon{position:relative;cursor:pointer}
  .cart-count{position:absolute;top:-6px;left:-6px;background:#ffb703;color:#021;padding:4px 7px;border-radius:50%;font-weight:800;font-size:12px}

/* misc */
  .top-controls{display:flex;gap:8px;align-items:center}
</style>
</head>
<body>
  <div class="container">
    <header class="topbar">
      <div class="brand"><div class="logo">T</div><div class="site-title">Ù…ØªØ¬Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ</div></div>
      <div class="search"><input id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ Ø£Ùˆ ØªØµÙ†ÙŠÙ..."></div>
      <div class="top-actions">
        <div class="top-controls">
          <div class="cart-icon" id="openCartBtn" title="Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©">ğŸ›’
            <span class="cart-count" id="cartCount">0</span>
          </div>
        </div>
      </div>
    </header>

    <div class="cat-links" id="categories"></div>

    <div class="main">
      <section class="products" id="productsGrid"></section>

      <aside class="aside">
        <div class="cart" id="cartBox">
          <h3>ğŸ›’ Ø³Ù„ØªÙƒ</h3>
          <div class="cart-list" id="cartList"></div>
          <div id="cartEmpty" class="empty">Ø³Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¡ ÙØ§Ø±ØºØ©</div>
          <div class="cart-summary" id="cartSummary" style="display:none">
            <div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</div>
            <div id="cartTotal">0 Ø¯Ø¬</div>
          </div>
          <button id="checkoutBtn" class="checkout" style="display:none">ğŸ’³ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
        </div>
      </aside>
    </div>
  </div>

  <!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ù†ØªØ¬ -->
  <div class="modal" id="productModal"><div class="modal-box">
    <div>
      <img id="modalImg" src="">
    </div>
    <div class="desc">
      <h2 id="modalTitle"></h2>
      <p id="modalPrice" class="price"></p>
      <p id="modalDesc" class="meta"></p>
      <div style="margin-top:12px;display:flex;gap:8px">
        <input id="modalQty" type="number" value="1" min="1" style="width:90px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)">
        <button id="modalAdd" class="btn" style="background:var(--accent2);color:#071024;padding:10px;border-radius:8px;border:0;cursor:pointer">â• Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
      </div>
      <div style="margin-top:8px;color:var(--muted)">ØªØµÙ†ÙŠÙ: <span id="modalCat"></span></div>
    </div>
    <div style="position:absolute;top:8px;left:12px"><button id="closeModal" class="small-btn">âœ– Ø¥ØºÙ„Ø§Ù‚</button></div>
  </div></div>

<script>
/* ======= Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ø£Ùˆ Ø¬Ù„Ø¨Ù‡Ø§ Ù…Ù† API) ======= */
const PRODUCTS = [
  { id:'p1', title:'Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ©', desc:'Ø³Ø§Ø¹Ø© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ù…Ø¹ Ù‚ÙŠØ§Ø³ Ù†Ø¨Ø¶Ø§ØªØŒ ØªØªØ¨Ø¹ Ø§Ù„Ù„ÙŠØ§Ù‚Ø©.', price:2500, cat:'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', img:'https://picsum.photos/seed/p1/600/400' },
  { id:'p2', title:'Ø³Ù…Ø§Ø¹Ø§Øª Ø¨Ù„ÙˆØªÙˆØ«', desc:'Ø³Ù…Ø§Ø¹Ø§Øª Ù„Ø§Ø³Ù„ÙƒÙŠØ© Ø¨Ø¬ÙˆØ¯Ø© ØµÙˆØª Ø¹Ø§Ù„ÙŠØ© ÙˆÙ…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ø¯Ù…Ø¬.', price:1800, cat:'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', img:'https://picsum.photos/seed/p2/600/400' },
  { id:'p3', title:'Ø­Ø°Ø§Ø¡ Ø±ÙŠØ§Ø¶ÙŠ', desc:'Ø­Ø°Ø§Ø¡ Ù…Ø±ÙŠØ­ Ù„Ù„Ø±ÙƒØ¶ ÙˆØ§Ù„Ù…Ø´ÙŠ Ø§Ù„ÙŠÙˆÙ…ÙŠ.', price:3500, cat:'Ø£Ø²ÙŠØ§Ø¡', img:'https://picsum.photos/seed/p3/600/400' },
  { id:'p4', title:'Ù„ÙˆØ­Ø© Ø£Ù„Ø¹Ø§Ø¨', desc:'Ù„ÙˆØ­Ø© Ø£Ù„Ø¹Ø§Ø¨ Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©.', price:4200, cat:'Ø£Ù„Ø¹Ø§Ø¨', img:'https://picsum.photos/seed/p4/600/400' },
  { id:'p5', title:'Ù…ÙØ±Ø´ Ø·Ø§ÙˆÙ„Ø©', desc:'Ù…ÙØ±Ø´ Ø£Ù†ÙŠÙ‚ Ù„Ù„Ù…Ø§Ø¦Ø¯Ø© Ø¨Ù…Ù‚Ø§Ø³Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©.', price:900, cat:'Ù…Ù†Ø§Ø²Ù„', img:'https://picsum.photos/seed/p5/600/400' },
  { id:'p6', title:'Ù…Ø¶Ø±Ø¨ ØªÙ†Ø³', desc:'Ù…Ø¶Ø±Ø¨ Ø®ÙÙŠÙ ÙˆÙ…ØªÙŠÙ† Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† ÙˆØ§Ù„Ù…Ø­ØªØ±ÙÙŠÙ†.', price:3000, cat:'Ø±ÙŠØ§Ø¶Ø©', img:'https://picsum.photos/seed/p6/600/400' }
];

/* ======= Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ù„Ø© Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠÙ‹Ø§ ======= */
let CART = JSON.parse(localStorage.getItem('my_shop_cart_v1')||'{}'); // structure: {productId: qty}

/* ==== Ø¹Ù†Ø§ØµØ± DOM ==== */
const productsGrid = document.getElementById('productsGrid');
const categoriesEl = document.getElementById('categories');
const searchInput = document.getElementById('searchInput');
const cartList = document.getElementById('cartList');
const cartCount = document.getElementById('cartCount');
const cartEmpty = document.getElementById('cartEmpty');
const cartSummary = document.getElementById('cartSummary');
const cartTotal = document.getElementById('cartTotal');
const checkoutBtn = document.getElementById('checkoutBtn');
const productModal = document.getElementById('productModal');
const modalImg = document.getElementById('modalImg');
const modalTitle = document.getElementById('modalTitle');
const modalPrice = document.getElementById('modalPrice');
const modalDesc = document.getElementById('modalDesc');
const modalAdd = document.getElementById('modalAdd');
const modalQty = document.getElementById('modalQty');
const modalCat = document.getElementById('modalCat');
const closeModalBtn = document.getElementById('closeModal');
const openCartBtn = document.getElementById('openCartBtn');

/* ======= Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª ======= */
const categories = ['Ø§Ù„ÙƒÙ„', ...Array.from(new Set(PRODUCTS.map(p=>p.cat)))];
let activeCat = 'Ø§Ù„ÙƒÙ„';
categories.forEach(cat=>{
  const btn = document.createElement('button');
  btn.textContent = cat;
  if(cat===activeCat) btn.classList.add('active');
  btn.onclick = ()=>{ document.querySelectorAll('.cat-links button').forEach(b=>b.classList.remove('active')); btn.classList.add('active'); activeCat=cat; renderProducts(); }
  categoriesEl.appendChild(btn);
});

/* ======= Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø© ======= */
let searchQuery = '';
searchInput.addEventListener('input', e=>{ searchQuery = e.target.value.trim().toLowerCase(); renderProducts(); });

function productMatches(p){
  if(activeCat !== 'Ø§Ù„ÙƒÙ„' && p.cat !== activeCat) return false;
  if(searchQuery === '') return true;
  return (p.title + ' ' + p.desc + ' ' + p.cat).toLowerCase().includes(searchQuery);
}

/* ======= Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ======= */
function renderProducts(){
  productsGrid.innerHTML = '';
  const list = PRODUCTS.filter(productMatches);
  if(list.length===0){
    productsGrid.innerHTML = '<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«</div>';
    return;
  }
  list.forEach(p=>{
    const el = document.createElement('div');
    el.className = 'product';
    el.innerHTML = `
      <img src="${p.img}" alt="${p.title}" data-id="${p.id}">
      <h4 data-id="${p.id}">${p.title}</h4>
      <div class="meta">${p.cat}</div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:auto">
        <div class="price">${p.price.toLocaleString()} Ø¯Ø¬</div>
        <div style="display:flex;gap:8px">
          <button class="small-btn" data-id="${p.id}" title="Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©">â•</button>
          <button class="small-btn" data-id="${p.id}" title="Ø§Ù„Ù…Ø²ÙŠØ¯">â„¹ï¸</button>
        </div>
      </div>
    `;
    // events: open modal on img/title/â„¹ï¸
    el.querySelectorAll('img, h4').forEach(node=>node.addEventListener('click', ()=> openProductModal(p.id)));
    el.querySelector('button[title="Ø§Ù„Ù…Ø²ÙŠØ¯"]').addEventListener('click', ()=> openProductModal(p.id));
    el.querySelector('button[title="Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©"]').addEventListener('click', ()=> addToCart(p.id,1));
    productsGrid.appendChild(el);
  });
}

/* ======= Ø³Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¡ ======= */
function saveCart(){ localStorage.setItem('my_shop_cart_v1', JSON.stringify(CART)); renderCart(); }
function addToCart(productId, qty=1){
  CART[productId] = (CART[productId]||0) + qty;
  saveCart();
}
function removeFromCart(productId){
  delete CART[productId];
  saveCart();
}
function setQty(productId, qty){
  if(qty <= 0) removeFromCart(productId);
  else CART[productId] = qty;
  saveCart();
}

/* render cart */
function renderCart(){
  cartList.innerHTML = '';
  const ids = Object.keys(CART);
  const items = ids.map(id=>({ ...PRODUCTS.find(p=>p.id===id), qty:CART[id] }));
  if(items.length===0){
    cartEmpty.style.display='block';
    cartSummary.style.display='none';
    checkoutBtn.style.display='none';
    cartCount.textContent = 0;
    return;
  }
  cartEmpty.style.display='none';
  cartSummary.style.display='flex';
  checkoutBtn.style.display='block';
  let total=0, count=0;
  items.forEach(it=>{
    const div = document.createElement('div');
    div.className='cart-item';
    div.innerHTML = `
      <img src="${it.img}" alt="${it.title}">
      <div class="info">
        <div style="font-weight:700">${it.title}</div>
        <div style="color:var(--muted);font-size:13px">${it.price.toLocaleString()} Ø¯Ø¬</div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:center;gap:6px">
        <div class="qty">
          <button class="small-btn" data-id="${it.id}" data-op="dec">-</button>
          <div style="min-width:28px;text-align:center">${it.qty}</div>
          <button class="small-btn" data-id="${it.id}" data-op="inc">+</button>
        </div>
        <button class="small-btn" data-id="${it.id}" data-op="del" style="background:#c0392b">Ø­Ø°Ù</button>
      </div>
    `;
    div.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const id = btn.dataset.id;
        const op = btn.dataset.op;
        if(op==='inc') setQty(id, CART[id]+1);
        if(op==='dec') setQty(id, CART[id]-1);
        if(op==='del') removeFromCart(id);
      });
    });
    cartList.appendChild(div);
    total += it.price * it.qty;
    count += it.qty;
  });
  cartTotal.textContent = total.toLocaleString() + ' Ø¯Ø¬';
  cartCount.textContent = count;
}

/* Checkout (mock) */
checkoutBtn.addEventListener('click', ()=>{
  const ids = Object.keys(CART);
  if(ids.length===0) return alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©');
  const total = Object.entries(CART).reduce((s,[id,qty])=>{
    const p = PRODUCTS.find(x=>x.id===id);
    return s + (p.price * qty);
  },0);
  if(!confirm(`Ù…Ø¬Ù…ÙˆØ¹ Ø·Ù„Ø¨Ùƒ ${total.toLocaleString()} Ø¯Ø¬\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ (Ù…Ø­Ø§ÙƒØ§Ø©)ØŸ`)) return;
  // Ù…Ø­Ø§ÙƒØ§Ø©: Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© ÙˆØ­ÙØ¸ Ø·Ù„Ø¨ (ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø· Ø¨Ø®Ø§Ø¯Ù… Ù„Ø§Ø­Ù‚Ù‹Ø§)
  CART = {};
  saveCart();
  alert('ØªÙ…Øª Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©: ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨. Ø´ÙƒØ±Ø§Ù‹ Ù„ØªØ³ÙˆÙ‚Ùƒ!');
});

/* ======= Ù…Ù†ØªØ¬ Ù…ÙˆØ¯Ø§Ù„ ======= */
let currentModalProduct = null;
function openProductModal(id){
  const p = PRODUCTS.find(x=>x.id===id);
  if(!p) return;
  currentModalProduct = p;
  modalImg.src = p.img;
  modalTitle.textContent = p.title;
  modalPrice.textContent = p.price.toLocaleString() + ' Ø¯Ø¬';
  modalDesc.textContent = p.desc;
  modalCat.textContent = p.cat;
  modalQty.value = 1;
  productModal.classList.add('open');
}
document.getElementById('modalAdd').addEventListener('click', ()=>{
  if(!currentModalProduct) return;
  const q = Math.max(1, Number(modalQty.value||1));
  addToCart(currentModalProduct.id, q);
  productModal.classList.remove('open');
});
closeModalBtn.addEventListener('click', ()=> productModal.classList.remove('open'));
productModal.addEventListener('click', (e)=>{ if(e.target === productModal) productModal.classList.remove('open'); });

/* open cart (scroll to aside) */
openCartBtn.addEventListener('click', ()=> {
  window.scrollTo({ top: document.querySelector('.aside').offsetTop - 20, behavior:'smooth'});
});

/* initialize */
renderProducts();
renderCart();

/* Save on unload */
window.addEventListener('beforeunload', ()=> localStorage.setItem('my_shop_cart_v1', JSON.stringify(CART)));
</script>
</body>
</html>
