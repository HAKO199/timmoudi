<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>من سيربح المليون — استوديو (100 سؤال)</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#02102a;
  --panel:#062243;
  --accent:#ff9a00; /* برتقالي */
  --accent-dark:#ff7b00;
  --blue:#0b4b7a;
  --muted:#9fb3cf;
  --white: #eaf6ff;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  font-family:'Cairo',sans-serif;
  background:
    radial-gradient(800px 300px at 10% 10%, rgba(0,90,170,0.06), transparent 6%),
    linear-gradient(180deg,#001026, #02102a 60%);
  color:var(--white);
  padding:18px;
}
/* layout */
.stage-wrap{ max-width:1300px; margin:0 auto; display:grid; grid-template-columns: 220px 1fr; gap:18px; align-items:start; }
.header{ grid-column:1/-1; display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:6px; }
.brand{ display:flex; gap:12px; align-items:center; }
.logo{ width:62px; height:62px; border-radius:10px; background:linear-gradient(135deg,var(--accent),#ffd36b); color:#052; display:flex; align-items:center; justify-content:center; font-weight:900; box-shadow:0 10px 40px rgba(255,155,60,0.08); }
.title{ font-size:20px; margin:0; }
.subtitle{ color:var(--muted); font-size:13px; margin-top:4px; }

/* prize ladder (left column) */
.prize-ladder{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
  border-radius:12px; padding:12px; position:sticky; top:20px; height:calc(100vh - 60px);
  border:1px solid rgba(255,255,255,0.03);
}
.prize-ladder h3{ margin:6px 0 10px 0; color:var(--muted); font-size:14px; text-align:right; }
.prize-list{ display:flex; flex-direction:column-reverse; gap:8px; height:100%; overflow:auto; padding-right:6px; }
.prize-item{ padding:8px 10px; border-radius:8px; display:flex; justify-content:space-between; align-items:center; font-weight:700; color:var(--muted); border:1px solid rgba(255,255,255,0.02); background:transparent; }
.prize-item.active{ background: linear-gradient(90deg,#06345a,#0a5a86); color:#fff; box-shadow:0 10px 30px rgba(0,90,140,0.16); border:1px solid rgba(255,255,255,0.04); }
.best-score{ margin:8px 0; color:var(--accent); font-weight:800; text-align:right; }

/* main stage (right column) */
.stage{
  background: radial-gradient(800px 200px at 50% 0%, rgba(0,120,200,0.06), transparent 20%), linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border-radius:14px; padding:18px; border:1px solid rgba(255,255,255,0.03);
  box-shadow: 0 30px 80px rgba(0,0,0,0.6);
  position:relative;
  overflow:hidden;
}

/* top lifelines area similar to screenshot */
.lifelines-bar{ display:flex; justify-content:center; gap:18px; align-items:center; margin-bottom:12px; transform: translateZ(20px); }
.lifeline{ width:72px; height:64px; border-radius:12px; background:linear-gradient(180deg,#071b33,#08324f); display:flex; flex-direction:column; align-items:center; justify-content:center; color:var(--white); font-weight:800; border:3px solid rgba(255,255,255,0.03); box-shadow:0 6px 18px rgba(0,0,0,0.5); }
.lifeline.used{ opacity:0.35; pointer-events:none; filter:grayscale(0.5); }

/* question card */
.question-card{ margin-top:8px; background: linear-gradient(180deg,#08314a,#042033); border-radius:10px; padding:20px; border:2px solid rgba(255,255,255,0.04); position:relative; box-shadow:0 8px 30px rgba(0,0,0,0.6); }
.q-box{ background: linear-gradient(180deg,#0b4b7a,#06345a); border-radius:8px; padding:18px; color:#eaf6ff; font-weight:700; font-size:20px; border:4px solid rgba(255,255,255,0.06); text-align:center; margin-bottom:14px; position:relative; }
.q-box:before{ content:''; position:absolute; left:-24px; top:50%; transform:translateY(-50%); width:24px; height:4px; background:linear-gradient(90deg,transparent,#fff,transparent); opacity:0.06; }
.q-meta{ display:flex; align-items:center; gap:12px; margin-bottom:8px; }

/* answers: elongated with angled ends like in the screenshot */
.answers{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.answer{
  background: linear-gradient(90deg,#063d66,#024a6c);
  color:var(--white);
  padding:14px 18px;
  border-radius:8px;
  position:relative;
  cursor:pointer;
  font-weight:800;
  text-align:right;
  border:3px solid rgba(255,255,255,0.04);
  transition: transform .16s, box-shadow .16s, background .16s;
  display:flex; align-items:center; justify-content:space-between;
}
/* angled ends effect using pseudo */
.answer:before, .answer:after{
  content:''; position:absolute; width:28px; height:100%; top:0; background:inherit;
  transform:skewX(18deg); z-index:0;
}
.answer:after{ right:-14px; clip-path: polygon(0 0,100% 50%,0 100%); }
.answer:before{ left:-14px; clip-path: polygon(100% 0,0 50%,100% 100%); }
.answer > .text{ position:relative; z-index:2; width:100%; padding:0 12px; }
.answer:hover{ transform:translateY(-6px); box-shadow:0 14px 40px rgba(0,0,0,0.6), 0 6px 20px rgba(0,90,160,0.12); background: linear-gradient(90deg,#0a6fb0,#0b5a8b); }
.answer.correct{ background: linear-gradient(90deg,#2aa84d,#1a8a3a); box-shadow:0 18px 50px rgba(30,180,80,0.12); border-color: rgba(20,200,100,0.12); color:#021; }
.answer.wrong{ background: linear-gradient(90deg,#c94b3a,#a8362b); box-shadow:0 18px 50px rgba(200,60,60,0.12); color:#fff; }
.answer.disabled{ opacity:0.38; pointer-events:none; transform:none; }

/* orange highlight for selected */
.highlight-orange{ background: linear-gradient(90deg,var(--accent),var(--accent-dark)); color:#042; box-shadow:0 18px 40px rgba(255,140,20,0.14); border-color: rgba(255,180,90,0.15); }

/* status and controls */
.controls{ display:flex; justify-content:space-between; align-items:center; margin-top:14px; gap:12px; }
.btn{
  background: linear-gradient(90deg,var(--neon-blue,#00c2ff),var(--accent));
  color:#021; padding:10px 14px; border-radius:10px; border:0; font-weight:800; cursor:pointer;
  box-shadow:0 10px 30px rgba(0,180,220,0.10);
}
.btn.ghost{ background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.04); box-shadow:none; }

/* modal */
.modal-backdrop{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:9999; background:rgba(2,6,23,0.7); }
.modal{ background:linear-gradient(180deg,#081428,#0b2a4a); padding:20px; border-radius:10px; width:90%; max-width:640px; color:var(--white); }

/* small screens */
@media(max-width:980px){
  .stage-wrap{ grid-template-columns:1fr; padding-bottom:40px; }
  .prize-ladder{ position:static; height:auto; }
}
</style>
</head>
<body>

<div class="stage-wrap">
  <header class="header">
    <div class="brand">
      <div class="logo">مليون</div>
      <div>
        <h1 class="title">من سيربح المليون — استوديو</h1>
        <div class="subtitle">100 سؤال — وضع الاستوديو مع أصوات ومؤثرات</div>
      </div>
    </div>
    <div>
      <button id="musicToggle" class="btn ghost">تشغيل الموسيقى</button>
      <button id="restartBtn" class="btn ghost">إعادة البدء</button>
    </div>
  </header>

  <!-- ladder -->
  <aside class="prize-ladder">
    <h3>سلم الجوائز</h3>
    <div class="best-score">🏆 أعلى محلي: <span id="bestLocal">0</span>$</div>
    <div class="prize-list" id="prizeList"></div>
    <div style="margin-top:12px; text-align:right;">
      <button id="helpBtn" class="btn ghost">تعليمات</button>
    </div>
  </aside>

  <!-- main stage -->
  <main class="stage">
    <div class="lifelines-bar" aria-hidden="true">
      <div id="ll-phone" class="lifeline">📞<br><small>الاتصال</small></div>
      <div id="ll-audience" class="lifeline">👥<br><small>الجمهور</small></div>
      <div id="ll-5" class="lifeline">5<br><small>نقاط</small></div>
      <div id="ll-5050" class="lifeline">50:50<br><small>نصف</small></div>
      <div id="ll-walk" class="lifeline">انسحب</div>
    </div>

    <div class="question-card">
      <div class="meta-row">
        <div class="level-badge" id="levelBadge">سؤال 1</div>
        <div class="timer-wrap" style="margin-left:auto">
          <div class="timer-circle" id="timerCircle">
            <div class="timer-inner" id="timerInner">30</div>
          </div>
        </div>
      </div>

      <div class="q-box" id="questionBox">سوف يظهر السؤال هنا</div>

      <div class="answers" id="answersGrid">
        <!-- أجوبة تولد هنا -->
      </div>

      <div class="controls">
        <div class="lifelines">
          <button id="lifeline5050" class="lifeline-btn">50:50</button>
          <button id="lifelineShow2" class="lifeline-btn">عرض خيارين</button>
          <button id="lifelineSwap" class="lifeline-btn">تبديل</button>
        </div>

        <div style="display:flex; gap:8px;">
          <button id="walkBtn" class="btn ghost">انسحب</button>
          <button id="nextBtn" class="btn" style="display:none">التالي →</button>
        </div>
      </div>

      <div style="margin-top:12px;color:var(--muted);font-size:13px;text-align:right">
        الحالة: <span id="statusText">جاهز</span>
      </div>
    </div>

  </main>
</div>

<div class="modal-backdrop" id="modalRoot">
  <div class="modal" id="modalBox">
    <h3 id="modalTitle">عنوان</h3>
    <div id="modalText" style="color:var(--muted);margin-top:8px">...</div>
    <div style="text-align:left;margin-top:12px">
      <button class="btn" onclick="closeModal()">حسناً</button>
    </div>
  </div>
</div>

<!-- أصوات -->
<audio id="bgMusic" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
<audio id="sndCorrect" src="https://www.soundjay.com/button/sounds/button-3.mp3"></audio>
<audio id="sndWrong" src="https://www.soundjay.com/button/sounds/button-10.mp3"></audio>
<audio id="sndTick" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3"></audio>

<script>
/* ========== بنك الأسئلة (100 سؤال) ========== */
const questionsBank = [
  { q:'ما هي عاصمة فرنسا؟', choices:['مدريد','باريس','روما','برلين'], answer:1 },
  { q:'أي لغة تُستخدم لإنشاء صفحات الويب؟', choices:['بايثون','جافا','HTML + CSS + JS','سي شارب'], answer:2 },
  { q:'كم عدد كواكب المجموعة الشمسية؟', choices:['7','8','9','10'], answer:1 },
  { q:'من اخترع المصباح الكهربائي (الشائع)؟', choices:['توماس إديسون','نيوتن','جاليليو','أرسطو'], answer:0 },
  { q:'ما هو أكبر محيط على الأرض؟', choices:['الهندي','الأطلسي','الهادي','الشمالي'], answer:2 },
  { q:'ما هي وحدة قياس التيار الكهربائي؟', choices:['فولت','أمبير','أوم','وات'], answer:1 },
  { q:'أي دولة بها أهرامات الجيزة؟', choices:['العراق','السودان','مصر','تركيا'], answer:2 },
  { q:'ما هو الغاز الأكثر وفرة في الغلاف الجوي للأرض؟', choices:['أكسجين','هيليوم','نيتروجين','كربون'], answer:2 },
  { q:'من كتب \"الأمير\"؟', choices:['ميكافيللي','شكسبير','مونتسكيو','هيجل'], answer:0 },
  { q:'ما اسم أسرع حيوان بري؟', choices:['أسد','فهد','غزال','ثعلب'], answer:1 },
  { q:'ما هي عاصمة اليابان؟', choices:['بكين','طوكيو','سول','أوساكا'], answer:1 },
  { q:'من هو النبي الذي ابتلعه الحوت؟', choices:['يونس','نوح','موسى','إبراهيم'], answer:0 },
  { q:'ما هي عملة الولايات المتحدة الأمريكية؟', choices:['اليورو','الدولار','الجنيه','الين'], answer:1 },
  { q:'في أي قارة تقع مصر؟', choices:['آسيا','أوروبا','إفريقيا','أمريكا'], answer:2 },
  { q:'كم عدد قارات العالم؟', choices:['5','6','7','8'], answer:2 },
  { q:'أين يقع برج إيفل؟', choices:['روما','مدريد','باريس','لندن'], answer:2 },
  { q:'ما هي عاصمة روسيا؟', choices:['كييف','موسكو','وارسو','براغ'], answer:1 },
  { q:'من هو مخترع الهاتف؟', choices:['ألكسندر بيل','إديسون','تسلا','ماركوني'], answer:0 },
  { q:'أكبر دولة في العالم من حيث المساحة؟', choices:['الصين','أمريكا','روسيا','كندا'], answer:2 },
  { q:'أصغر كوكب في المجموعة الشمسية؟', choices:['عطارد','المريخ','زحل','نبتون'], answer:0 },
  { q:'من كتب \"هاملت\"؟', choices:['شكسبير','هوميروس','تولستوي','ديكنز'], answer:0 },
  { q:'ما هو أطول نهر في العالم؟', choices:['الأمازون','النيل','الدانوب','الغانج'], answer:0 },
  { q:'كم عدد أيام السنة الكبيسة؟', choices:['365','366','364','367'], answer:1 },
  { q:'أين يقع المسجد الحرام؟', choices:['المدينة','مكة','القدس','بغداد'], answer:1 },
  { q:'من أول من مشى على سطح القمر؟', choices:['نيل أرمسترونغ','يوري غاغارين','مايكل كولينز','بز ألدرين'], answer:0 },
  { q:'ما هي عاصمة الجزائر؟', choices:['وهران','الجزائر العاصمة','عنابة','قسنطينة'], answer:1 },
  { q:'ما اللغة الرسمية في البرازيل؟', choices:['إسبانية','برتغالية','فرنسية','إنجليزية'], answer:1 },
  { q:'كم عدد أركان الإسلام؟', choices:['3','4','5','6'], answer:2 },
  { q:'ما هي الدولة التي تسمى أرض الفراعنة؟', choices:['اليونان','العراق','مصر','الهند'], answer:2 },
  { q:'ما هو الكوكب الأحمر؟', choices:['عطارد','المريخ','الزهرة','أورانوس'], answer:1 },
  { q:'ما اسم عاصمة إيطاليا؟', choices:['ميلانو','روما','فلورنسا','نابولي'], answer:1 },
  { q:'من هو مؤسس علم الجبر؟', choices:['الخوارزمي','ابن سينا','ابن رشد','الفارابي'], answer:0 },
  { q:'ما هي اللغة الأكثر انتشارًا في العالم؟', choices:['العربية','الإنجليزية','الصينية','الإسبانية'], answer:2 },
  { q:'كم عدد أضلاع المربع؟', choices:['3','4','5','6'], answer:1 },
  { q:'من القائل: إذا الشعب يومًا أراد الحياة؟', choices:['المتنبي','أبو القاسم الشابي','أحمد شوقي','الشافعي'], answer:1 },
  { q:'أين يقع تمثال الحرية؟', choices:['باريس','واشنطن','نيويورك','بوسطن'], answer:2 },
  { q:'ما هو أكبر كوكب في المجموعة الشمسية؟', choices:['الأرض','المشتري','زحل','أورانوس'], answer:1 },
  { q:'أول جامعة في العالم؟', choices:['الأزهر','القرويين','هارفارد','أوكسفورد'], answer:1 },
  { q:'كم عدد أحرف اللغة العربية؟', choices:['26','28','30','32'], answer:1 },
  { q:'من هو مؤسس فيسبوك؟', choices:['مارك زوكربيرغ','بيل غيتس','ستيف جوبز','إيلون ماسك'], answer:0 },
  { q:'ما هي عاصمة تركيا؟', choices:['إسطنبول','أنقرة','إزمير','بورصة'], answer:1 },
  { q:'ما اسم أكبر صحراء في العالم؟', choices:['صحراء الجزائر','الصحراء الكبرى','جوبي','كاليهاري'], answer:1 },
  { q:'من هو مخترع الإنترنت؟', choices:['تيم بيرنرز لي','إديسون','تسلا','ستيف جوبز'], answer:0 },
  { q:'ما هي أول سورة في القرآن الكريم؟', choices:['البقرة','الفاتحة','الإخلاص','الناس'], answer:1 },
  { q:'كم عدد ألوان قوس قزح؟', choices:['5','6','7','8'], answer:2 },
  { q:'من هو عميد الأدب العربي؟', choices:['طه حسين','نجيب محفوظ','العقاد','المنفلوطي'], answer:0 },
  { q:'أين تقع مدينة دبي؟', choices:['السعودية','الإمارات','قطر','البحرين'], answer:1 },
  { q:'ما اسم أول سيارة في العالم؟', choices:['مرسيدس','فورد','فيات','بيجو'], answer:0 },
  { q:'ما هو الغاز اللازم للتنفس؟', choices:['نيتروجين','أكسجين','كربون','هيليوم'], answer:1 },
  { q:'كم عدد أيام الأسبوع؟', choices:['5','6','7','8'], answer:2 },
  { q:'ما هو الرمز الكيميائي للماء؟', choices:['H2O','O2','CO2','NaCl'], answer:0 },
  { q:'من هو شاعر النيل؟', choices:['نزار قباني','أحمد شوقي','محمود درويش','أمل دنقل'], answer:1 },
  { q:'ما هي أكبر قارة؟', choices:['إفريقيا','آسيا','أوروبا','أمريكا'], answer:1 },
  { q:'كم درجة غليان الماء بالسيلسيوس؟', choices:['90','95','100','105'], answer:2 },
  { q:'ما اسم أطول برج في العالم حتى 2021؟', choices:['برج شنغهاي','برج خليفة','برج تايبيه','برج المملكة'], answer:1 },
  { q:'من هو مؤلف رواية \"الأمير الصغير\"؟', choices:['أنطوان دو سانت-إكزوبيري','جورج أورويل','إرنست همنغواي','فرانس كافكا'], answer:0 },
  { q:'ما هي عملة اليابان؟', choices:['اليوان','الين','الروبل','الدولار'], answer:1 },
  { q:'ما هو الحيوان الذي يسمى سيد الغابة؟', choices:['نمر','أسد','فهد','دب'], answer:1 },
  { q:'ما اسم البحر الذي يفصل بين السعودية ومصر؟', choices:['البحر الأحمر','البحر المتوسط','خليج العقبة','خليج السويس'], answer:0 },
  { q:'من هو أول رئيس للولايات المتحدة؟', choices:['توماس جيفرسون','جورج واشنطن','ابراهام لنكولن','جون آدمز'], answer:1 },
  { q:'ما اسم لوحة ليوناردو دافنشي الشهيرة؟', choices:['الصرخة','الموناليزا','الليلة النجمية','الدرس الأول'], answer:1 },
  { q:'ما هو المعدن المستخدم في صناعة الحلي الذهبية؟', choices:['الفضة','الذهب','الحديد','النحاس'], answer:1 },
  { q:'من هو مخترع الطباعة؟', choices:['غوتنبرغ','أرخميدس','ليوناردو','أينشتاين'], answer:0 },
  { q:'ما هي عاصمة كندا؟', choices:['تورونتو','مونتريال','أوتاوا','فانكوفر'], answer:2 },
  { q:'ما اسم أكبر قمر لكوكب المشتري؟', choices:['أوروبا','غانيميد','إيو','كاليستو'], answer:1 },
  { q:'ما هي اللغة الرسمية في مصر؟', choices:['الفرنسية','الإنجليزية','العربية','الأمازيغية'], answer:2 },
  { q:'من هو صاحب الأندلس التاريخي؟', choices:['الممالك المسيحية','الإمبراطورية العثمانية','الدولة الأموية في الأندلس','البرتغاليون'], answer:2 },
  { q:'كم عدد صفحات المصحف تقريبًا؟', choices:['604','620','630','645'], answer:0 },
  { q:'ما اسم أطول سور القرآن؟', choices:['البقرة','النساء','آل عمران','التوبة'], answer:0 },
  { q:'ما هي عاصمة أستراليا؟', choices:['سيدني','ملبورن','كانبيرا','بريسبان'], answer:2 },
  { q:'من هو مؤلف \"مائة عام من العزلة\"؟', choices:['غابرييل غارسيا ماركيز','بابلو نيرودا','ماركيز','هربرت'], answer:0 },
  { q:'ما اسم الصبغة التي تجعل النبات أخضر؟', choices:['الكلس','الكلوروفيل','النيتروجين','الأكسجين'], answer:1 },
  { q:'ما هي وحدة قياس المقاومة؟', choices:['أمبير','فولت','أوم','واط'], answer:2 },
  { q:'من هو مؤسس الدولة العثمانية؟', choices:['عثمان بن أرطغرل','محمد الفاتح','سليم الأول','أورخان'], answer:0 },
  { q:'ما هي عاصمة ألمانيا؟', choices:['برلين','ميونخ','هامبورغ','فرانكفورت'], answer:0 },
  { q:'من هو مؤسس المملكة العربية السعودية الحديثة؟', choices:['عبدالعزيز آل سعود','عبدالله بن عبدالعزيز','فهد بن عبدالعزيز','سعود بن عبدالعزيز'], answer:0 },
  { q:'ما اسم البحر الذي يربط أوروبا بآسيا؟', choices:['البحر الأسود','بحر قزوين','المتوسط','البحر الأحمر'], answer:2 },
  { q:'ما اسم أسرع طائرة في التاريخ؟', choices:['F-22','SR-71','MiG-25','F-16'], answer:1 },
  { q:'ما هي عاصمة إسبانيا؟', choices:['مدريد','برشلونة','فالنسيا','إشبيلية'], answer:0 },
  { q:'ما هو الحيوان الوطني لأستراليا؟', choices:['الكنغر','الكوكا','الكنغر الأحمر','الطيور'], answer:0 },
  { q:'ما اسم أول قمر صناعي؟', choices:['سبوتنيك','أبولو','فوياجر','إكسبلورر'], answer:0 },
  { q:'ما هي سرعة الضوء تقريبًا؟', choices:['300,000 كم/ث','150,000 كم/ث','30,000 كم/ث','3,000 كم/ث'], answer:0 },
  { q:'من كتب الكوميديا الإلهية؟', choices:['دانتي أليغييري','شكسبير','بترارك','هوميروس'], answer:0 },
  { q:'ما هي عاصمة الهند؟', choices:['مومباي','بنغالور','نيودلهي','كلكتا'], answer:2 },
  { q:'ما هو الرمز الكيميائي للحديد؟', choices:['Ag','Fe','Au','Pb'], answer:1 },
  { q:'أين تقع الأرجنتين؟', choices:['أوروبا','آسيا','أمريكا الجنوبية','أفريقيا'], answer:2 },
  { q:'ما هو اسم البحر بين السعودية ومصر؟', choices:['البحر الأحمر','خليج عدن','خليج العقبة','المحيط الهندي'], answer:0 },
  { q:'كم دقيقة في الساعة؟', choices:['50','60','70','80'], answer:1 },
  { q:'من اخترع الديناميت؟', choices:['تشارلز داروين','ألفريد نوبل','توماس إديسون','نيكولا تسلا'], answer:1 },
  { q:'ما هي عاصمة جنوب أفريقيا (واحدة من العواصم)؟', choices:['كيب تاون','جوهانسبرغ','بريتوريا','روستنبورغ'], answer:2 },
  { q:'ما اسم الكتاب المقدس للمسيحيين؟', choices:['القرآن','الإنجيل','التوراة','الفيدا'], answer:1 },
  { q:'ما هي أكبر غابة مطيرة؟', choices:['الأمازون','الكونغو','إندونيسيا','الغابات الكندية'], answer:0 },
  { q:'أين تأسست جامعة هارفارد؟', choices:['ماساتشوستس','فيرمونت','نيويورك','بنسلفانيا'], answer:0 },
  { q:'ما اسم أعلى قمة في العالم؟', choices:['إيفرست','كيلمنجارو','أكونكاجوا','ماكالو'], answer:0 },
  { q:'ما هي عاصمة الصين؟', choices:['شنغهاي','بكين','هونغ كونغ','تايبه'], answer:1 },
  { q:'من أول إنسان في الفضاء؟', choices:['نيل أرمسترونغ','يوري غاغارين','مايكل كولينز','ألان شيبرد'], answer:1 },
  { q:'ما الحيوان الذي يعطي الصوف؟', choices:['ماعز','جمل','غنم','بقرة'], answer:2 },
  { q:'ما اسم العملة البريطانية؟', choices:['اليورو','الجنيه الإسترليني','الدولار','الكرونة'], answer:1 },
  { q:'ما هو مؤلف رواية 1984؟', choices:['جورج أورويل','ألدوس هكسلي','إرنست همنغواي','تولكين'], answer:0 },
  { q:'ما هي عاصمة السويد؟', choices:['أوسلو','ستوكهولم','هلسنكي','كوبنهاغن'], answer:1 },
  { q:'ما أسرع سمكة؟', choices:['الدلفين','السمك الشراعي','القرش','الحوت'], answer:1 },
  { q:'ما الغاز الذي نتنفسه أساساً؟', choices:['هيليوم','نيتروجين','أكسجين','هيدروجين'], answer:2 },
  { q:'كم نجمة في علم الولايات المتحدة؟', choices:['50','25','13','52'], answer:0 },
  { q:'من اكتشف البنسلين؟', choices:['ألكسندر فليمنج','لويس باستور','ماري كوري','إدوين هابل'], answer:0 },
  { q:'ما أطول نهر في أفريقيا؟', choices:['الجزائر','النيجر','النيل','الكونغو'], answer:2 },
  { q:'ما هي عاصمة السعودية؟', choices:['جدة','مكة','الرياض','الدمام'], answer:2 },
  { q:'ما أقدم حضارة معروفة؟', choices:['الإغريقية','المصرية القديمة','السومرية','الرومانية'], answer:2 },
  { q:'من كتب أغنية Imagine؟', choices:['جون لينون','بول مكارتني','جورج هاريسون','رينغو ستار'], answer:0 },
  { q:'ما وحدة قياس الصوت؟', choices:['ديسبل','هرتز','ألغ','نيوتن'], answer:0 },
  { q:'ما تعرف مدينة النور؟', choices:['نيويورك','باريس','لندن','روما'], answer:1 },
  { q:'أي حيوان يبيض؟', choices:['الخروف','الكنغر','البطريق','الكلب'], answer:2 },
  { q:'ما علم النباتات؟', choices:['علوم الحيوان','علم النبات','الجيولوجيا','الفيزياء'], answer:1 },
  { q:'من مؤسس شركة تسلا؟', choices:['إيلون ماسك','ستيف جوبز','بيل غيتس','مارك زوكربيرغ'], answer:0 },
  { q:'ما أكبر بحيرة في العالم؟', choices:['سوبريور','الميت','قزوين','فيكتوريا'], answer:2 },
  { q:'ما أصغر قارة؟', choices:['أستراليا','أوروبا','أمريكا الجنوبية','أفريقيا'], answer:0 },
  { q:'ما جبل مشهور في اليابان؟', choices:['الألبروس','فوجي','إيفرست','أوليمبوس'], answer:1 },
  { q:'من كتب \"الجريمة والعقاب\"؟', choices:['دوستويفسكي','تورغنيف','تشيخوف','بوشكين'], answer:0 },
  { q:'ما عاصمة النرويج؟', choices:['أوسلو','ستافنجر','بيرغن','تروندهايم'], answer:0 },
  { q:'ما أسرع حشرة؟', choices:['اليعسوب','الذبابة','الخنفساء','الجراد'], answer:0 },
  { q:'ما أقرب كوكب للشمس؟', choices:['الزهرة','عطارد','الأرض','المريخ'], answer:1 }
];

/* ========== جوائز (مبسط) ========== */
const prizes = ['0','$100','$200','$300','$500','$1,000','$2,000','$4,000','$8,000','$16,000','$32,000','$64,000','$125,000','$250,000','$500,000','$1,000,000'];

/* ========== حالة اللعبة ========== */
let questions=[]; let currentIndex=0; let accepting=true;
let lifelinesUsed = { fifty:false, showTwo:false, swap:false };
let timerInterval=null; const TIME_PER_QUESTION = 30; let timeLeft = TIME_PER_QUESTION;
let bestLocal = Number(localStorage.getItem('millon_best') || 0);

/* ========== عناصر DOM ========== */
const qText = document.getElementById('questionBox');
const answersGrid = document.getElementById('answersGrid');
const levelBadge = document.getElementById('levelBadge');
const statusText = document.getElementById('statusText');
const timerInner = document.getElementById('timerInner');
const timerCircle = document.getElementById('timerCircle');
const prizeListEl = document.getElementById('prizeList');
const bestLocalEl = document.getElementById('bestLocal');

const lifeline5050 = document.getElementById('lifeline5050');
const lifelineShow2 = document.getElementById('lifelineShow2');
const lifelineSwap = document.getElementById('lifelineSwap');

const nextBtn = document.getElementById('nextBtn');
const walkBtn = document.getElementById('walkBtn');
const restartBtn = document.getElementById('restartBtn');
const helpBtn = document.getElementById('helpBtn');
const musicToggle = document.getElementById('musicToggle');

const modalRoot = document.getElementById('modalRoot');
const modalTitle = document.getElementById('modalTitle');
const modalText = document.getElementById('modalText');

const bgMusic = document.getElementById('bgMusic');
const sndCorrect = document.getElementById('sndCorrect');
const sndWrong = document.getElementById('sndWrong');
const sndTick = document.getElementById('sndTick');

bestLocalEl.textContent = bestLocal;

/* ========== وظائف مساعدة ========== */
function shuffle(a){ return a.slice().sort(()=>Math.random()-0.5); }
function clamp(v,a,b){ return Math.max(a,Math.min(b,v)); }

/* ========== عرض سلم الجوائز ========== */
function renderPrizes(){
  prizeListEl.innerHTML='';
  for(let i=prizes.length-1;i>=1;i--){
    const idx = i;
    const div = document.createElement('div');
    div.className = 'prize-item' + ((currentIndex===idx-1)?' active':'');
    div.innerHTML = `<span>سؤال ${idx-1}</span><strong>${prizes[idx]}</strong>`;
    prizeListEl.appendChild(div);
  }
}

/* ========== بدء اللعبة ========== */
function startGame(){
  questions = shuffle(questionsBank).slice(0, questionsBank.length);
  currentIndex = 0;
  accepting = true;
  lifelinesUsed = { fifty:false, showTwo:false, swap:false };
  [lifeline5050, lifelineShow2, lifelineSwap].forEach(el=>el.classList.remove('used'));
  nextBtn.style.display='none';
  statusText.textContent='جاهز للتحدي';
  renderPrizes();
  loadQuestion();
}

/* ========== تحميل سؤال ========== */
function loadQuestion(){
  accepting = true;
  timeLeft = TIME_PER_QUESTION;
  updateTimerUI();
  startTimer();
  const q = questions[currentIndex];
  levelBadge.textContent = `سؤال ${currentIndex+1}`;
  qText.textContent = q.q;
  answersGrid.innerHTML='';
  const choices = q.choices || q.answers || [];
  choices.forEach((text,i)=>{
    const el = document.createElement('div');
    el.className = 'answer';
    el.dataset.index = i;
    el.innerHTML = `<div class="text">${text}</div>`;
    el.addEventListener('click', ()=> chooseAnswer(el));
    answersGrid.appendChild(el);
  });
  nextBtn.style.display='none';
  statusText.textContent='اختر إجابتك';
  renderPrizes();
}

/* ========== العداد ========== */
function startTimer(){
  clearInterval(timerInterval);
  timerInterval = setInterval(()=>{
    timeLeft--;
    updateTimerUI();
    if(timeLeft<=5 && timeLeft>0){
      timerInner.classList.add('small-warning');
      sndTick.play().catch(()=>{});
    } else { timerInner.classList.remove('small-warning'); }
    if(timeLeft<=0){
      clearInterval(timerInterval);
      timeLeft=0;
      updateTimerUI();
      onTimeUp();
    }
  },1000);
}
function updateTimerUI(){
  const pct = clamp((TIME_PER_QUESTION - timeLeft) / TIME_PER_QUESTION, 0, 1);
  const deg = pct * 360;
  timerCircle.style.background = `conic-gradient(${getComputedStyle(document.documentElement).getPropertyValue('--accent') || '#ff9a00'} ${deg}deg, rgba(255,255,255,0.04) ${deg}deg)`;
  timerInner.textContent = timeLeft;
}

/* ========== معالجة الإجابات ========== */
function chooseAnswer(el){
  if(!accepting) return;
  if(el.classList.contains('disabled')) return;
  accepting = false;
  clearInterval(timerInterval);
  const idx = Number(el.dataset.index);
  const q = questions[currentIndex];
  const correctIndex = q.answer;
  if(idx === correctIndex){
    el.classList.add('correct');
    sndCorrect.play().catch(()=>{});
    statusText.textContent = 'إجابة صحيحة!';
    advanceAfterCorrect();
  } else {
    el.classList.add('wrong');
    sndWrong.play().catch(()=>{});
    revealCorrect(correctIndex);
    setTimeout(()=> finishGame(false),900);
  }
}

function revealCorrect(correctIndex){
  const els = Array.from(document.querySelectorAll('.answer'));
  els.forEach((c, i)=>{
    if(i===correctIndex) c.classList.add('correct');
    else if(!c.classList.contains('wrong')) c.classList.add('disabled');
  });
}

function advanceAfterCorrect(){
  currentIndex++;
  renderPrizes();
  if(currentIndex >= questions.length){
    setTimeout(()=> finishGame(true),900); return;
  }
  statusText.textContent = 'إجابة صحيحة — تحضير للسؤال التالي...';
  setTimeout(()=>{ nextBtn.style.display='inline-block'; accepting=true; statusText.textContent='اضغط التالي للانتقال' },800);
}

/* زر التالي */
nextBtn.addEventListener('click', ()=>{ nextBtn.style.display='none'; loadQuestion(); });

/* انتهاء الوقت */
function onTimeUp(){
  statusText.textContent = 'انتهى الوقت!';
  sndWrong.play().catch(()=>{});
  const q = questions[currentIndex];
  revealCorrect(q.answer);
  setTimeout(()=> finishGame(false),900);
}

/* نهاية اللعبة */
function finishGame(won){
  accepting = false;
  clearInterval(timerInterval);
  let earned = currentIndex>0 ? prizes[currentIndex] : prizes[0];
  if(won){
    showModal('مبروك!','لقد فزت بالمبلغ: ' + prizes[prizes.length-1]);
    const numeric = 1000000;
    if(numeric > bestLocal){ bestLocal = numeric; localStorage.setItem('millon_best', bestLocal); bestLocalEl.textContent = bestLocal; }
  } else {
    showModal('انتهت اللعبة','المبلغ الذي ربحته: ' + earned);
    const val = parseInt(String(earned).replace(/[^0-9]/g,'')) || 0;
    if(val > bestLocal){ bestLocal = val; localStorage.setItem('millon_best', bestLocal); bestLocalEl.textContent = bestLocal; }
  }
}

/* انسحب */
walkBtn.addEventListener('click', ()=> {
  const earned = currentIndex>0 ? prizes[currentIndex] : prizes[0];
  showModal('انسحاب', 'انسحبت واحتفظت بـ ' + earned);
  const val = parseInt(String(earned).replace(/[^0-9]/g,'')) || 0;
  if(val>bestLocal){ bestLocal = val; localStorage.setItem('millon_best', bestLocal); bestLocalEl.textContent = bestLocal; }
  accepting = false; clearInterval(timerInterval);
});

/* اعادة و تعليمات */
restartBtn.addEventListener('click', ()=>{ closeModal(); startGame(); });
helpBtn.addEventListener('click', ()=>{ showModal('تعليمات', `- اختر الإجابة الصحيحة من 4 خيارات.\n- يوجد ثلاث وسائل مساعدة: 50:50، إظهار خيارين، وتبديل السؤال.\n- لكل سؤال 30 ثانية.\n- يمكنك الانسحاب في أي وقت.`) });

/* مودال */
function showModal(title,text){ document.getElementById('modalTitle').innerText = title; document.getElementById('modalText').innerText = text; modalRoot.style.display='flex'; }
function closeModal(){ modalRoot.style.display='none'; }

/* وسائل المساعدة */
lifeline5050.addEventListener('click', ()=> {
  if(lifelinesUsed.fifty) return;
  lifelinesUsed.fifty = true; lifeline5050.classList.add('used');
  const q = questions[currentIndex];
  const wrongs = [0,1,2,3].filter(i=>i!==q.answer);
  shuffle(wrongs);
  const toDisable = wrongs.slice(0,2);
  toDisable.forEach(idx=>{ const el = document.querySelector(`.answer[data-index="${idx}"]`); if(el){ el.classList.add('disabled'); el.style.pointerEvents='none'; }});
  statusText.textContent='تم استخدام 50:50';
});
lifelineShow2.addEventListener('click', ()=> {
  if(lifelinesUsed.showTwo) return;
  lifelinesUsed.showTwo = true; lifelineShow2.classList.add('used');
  const q = questions[currentIndex];
  const wrongs = [0,1,2,3].filter(i=>i!==q.answer);
  shuffle(wrongs);
  const keep = wrongs[0];
  document.querySelectorAll('.answer').forEach((el, i)=>{ if(i!==q.answer && i!==keep){ el.classList.add('disabled'); el.style.pointerEvents='none'; }});
  statusText.textContent='تم إبقاء خيارين (واحد صحيح)';
});
lifelineSwap.addEventListener('click', ()=> {
  if(lifelinesUsed.swap) return;
  lifelinesUsed.swap = true; lifelineSwap.classList.add('used');
  const remaining = questionsBank.filter(q => !questions.includes(q));
  if(remaining.length===0){ showModal('تنبيه','لا توجد أسئلة بديلة حالياً'); return; }
  const newQ = remaining[Math.floor(Math.random()*remaining.length)];
  questions[currentIndex] = newQ;
  statusText.textContent='تم تبديل السؤال';
  loadQuestion();
});

/* موسيقى */
musicToggle.addEventListener('click', ()=>{
  if(bgMusic.paused){ bgMusic.volume = 0.4; bgMusic.play().catch(()=>{}); musicToggle.textContent='إيقاف الموسيقى'; musicToggle.classList.remove('ghost'); }
  else { bgMusic.pause(); bgMusic.currentTime=0; musicToggle.textContent='تشغيل الموسيقى'; musicToggle.classList.add('ghost'); }
});

/* init */
function init(){
  questionsBank.forEach(it=>{ if(!it.choices && it.answers) it.choices = it.answers; });
  bestLocalEl.textContent = bestLocal;
  renderPrizes();
  startGame();
}
modalRoot.addEventListener('click', (e)=>{ if(e.target===modalRoot) closeModal(); });
init();

</script>
</body>
</html>
